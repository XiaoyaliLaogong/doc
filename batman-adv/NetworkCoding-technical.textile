h1. Catwoman

When forwarding packets in a wireless mesh network, airtime can be saved by exploiting the information already present at the destinations of a forward. One way of doing this is _Network Coding_, where two packets are XOR'ed together before transmission. Two extract one of the included packets, the destination must simply XOR the network coded packet with the other included packet:

<pre>
  (p1 XOR p2) XOR p2 = p1
</pre>

For more information about the concept, read the news item about [[open-mesh:2011-08-18-network-coding-first-steps|Batman and Catwoman]].

h2. Current State

The current code is available in out "git repository":http://git.open-mesh.org/?p=hundeboll/catwoman.git (the "catwoman" branch) and supports the following features:
* Discover coding neighbors (one-hop neighbors that overhear each other).
* Code packets when both destinations has the information needed to decode.
* Decode coded packets.
* Recode decoded packets only when the destination(s) has the decoded packet (not always the case).

Catwoman is configured with the files in 
/sys/devices/virtual/net/bat0/mesh/catwoman{|_hold|purge}.

To collect information about the processed packets, read
/sys/kernel/debug/batman_adv/bat0/coding_stats

h2. Required Work

To make the implementation of catwoman complete, the following features must be implemented:
* -Remove outdated nodes from the list of coding neighbors periodically.-
* Support fragmented unicast packets.
* -Use the link quality of overhearing links when looking for coding opportunities.-
* -Support configuration with batctl.-
* -Use bat_dbg instead of printk.-
* Support setups with multiple interfaces.
* -Maintain ref-counters for struct orig_node.-
* -Refactor code into three files: catwoman.c, coding.c, and decoding.c-
* -Remove nc_path after a certain timeout.-
* Determine allowed holding times based on the tick time of the system.

h2. Ideas

* Send coded packets containing redundant packets to improve reliability.
* Support the cross topology where more than two destinations are coded.
* Implement Random Linear Network Coding (RLNC) on packets from the same flow, also to improve reliability.
* Use checksums instead of packet_id's to identify decoding packets.
* Implement a "catwoman-support"-flag in OGM to allow mixing of nodes with and without catwoman enabled.
* -Refactor function names and variables to cw_* (or nc_*) instead of catwoman_* and coding_*.-
* ...