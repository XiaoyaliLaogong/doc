h1. BackwardsCompatibility

Everything on this page is a suggestion and a work in progress therefore open to discussion and change.

h2. Intro

Right now batman does not have any  real backwards compatibility. We could implement real backward compatibility through the use of IEs (information elements) and more specifically TLVs (type/length/value) elements.

First the closest thing I found in wireless information elements is the wifi ones. For everyone who is not aware of the basics, here is a "link":http://etutorials.org/Networking/802.11+security.+wi-fi+protected+access+and+802.11i/Part+II+The+Design+of+Wi-Fi+Security/Chapter+13.+Wi-Fi+LAN+Coordination+ESS+and+IBSS/WPA+RSN+Information+Element/ with a brief and general/abstract description

h2. Main

There are many ways to encode such an element. Each providing different pros/cons and all of which are used in various applications.

# "Ber":http://en.wikipedia.org/wiki/Basic_Encoding_Rules (Basic Encoding Rules):
 and its two subsets
  # "Cer":http://en.wikipedia.org/wiki/Canonical_Encoding_Rules
  # "DER":http://en.wikipedia.org/wiki/Distinguished_Encoding_Rules (Distinguished Encoding Rules)  it is more restrictive than the first one
and 
# "PER":http://en.wikipedia.org/wiki/Packed_Encoding_Rules (Packed Encoding Rules)  defines some more fields
    

They are all part of the "Abstract Notation 1":http://en.wikipedia.org/wiki/ASN.1

Although they are extremely cool, and versatile I think that they might be a bit of an overkill and unencoded tlvs may do just fine.
Explanations:

The true power of BER comes from the fact that it can define the type of the value field and also this format allows a receiver to decode the ASN.1 information from an incomplete stream, without requiring any pre-knowledge of the size, content, or semantic meaning of the data.

Cer/Der are more restrictive and according to wikipedia they are used when there is a reason to restrict your data to only one type (e.g. security)
but in the real world even credit cards use Ber.


For the record there is already an external tlv message parser "Tlve":http://tlve.sourceforge.net/ ("example of ber parsing":http://tlve.sourceforge.net/examples/ber.rc)

h2.  In-Kernel functionality

Most systems use tlvs for a variety of things (from Alsa that uses unencoded tlvs to set the sound levels to the wifi)

There is already functionality for encoding/decoding 
#CIFS http://lxr.linux.no/#linux+v3.3.5/fs/cifs/asn1.c#L2
#nat_snmp_basic http://lxr.linux.no/#linux+v3.3.5/net/ipv4/netfilter/nf_nat_snmp_basic.c#L62

