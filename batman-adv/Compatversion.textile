= batman-adv COMPAT_VERSION =

COMPAT_VERSION in packet.h is used to identify an incoming packet and check if it can processed by the current version. The packet structure should be identified by this version. The stuff which appears in a packet jumps a little bit with each version because we change stuff in trunk/master and in next and import those changes to the packet structure out-of-order.

Following changes were identified and documented. The changes are to the last COMPAT_VERSION and not to the last change in a branch. So "added xyz on master, removed xyz on next and re-added xyz on master" does only mean that xyz was always there in master, but the version in next dropped that change and thus generated a new COMPAT_VERSION.

|| Version || Branch                         || Changes ||
||    1    || trunk                          || Initial definitions of batman_packet, icmp_packet, unicast_packet, bcast_packet, ethernet type 0x0842 ||
||    5    || trunk                          || information in batman_packet was reordered, tq, old_orig and hnas were added ||
||    6    || trunk, v0.1                    || vis_packet type added, version fields added to each packet, ethernet type changed to 0x4305 ||
||    7    || trunk                          || unused gw flags removed, reordered icmp and batman packet ||
||    8    || trunk, v0.2, v0.2.1, v2010.0.0 || source field introduced in vis packets ||
||    9    || trunk                          || Gateway flags added to batman_packet, primaries_first_hop flag added for bonding, special icmp messages for route record added ||
||   10    || trunk                          || 32 bit sequence numbers added/changed, ttl were added to broadcasts ||
||   11    || next, v2010.1.0*               || gateway flags were removed ||
||   12    || trunk                          || unicast fragmentation added, gateway flags were readded ||
||   13    || next, v2010.2.0*               || gateway flags were removed ||

(* means future version with already defined feature set)

There is a special COMPAT_VERSION 200 which is only used by saxnet. This version is v6 with bcast seqno protection added.
